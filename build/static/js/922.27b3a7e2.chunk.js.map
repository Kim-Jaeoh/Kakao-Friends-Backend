{"version":3,"file":"static/js/922.27b3a7e2.chunk.js","mappings":"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","sources":["components/myPage/MyPageSeen.jsx","hooks/useLocalStorage.jsx"],"sourcesContent":["import React, { useEffect, useState, lazy } from \"react\";\nimport styled from \"@emotion/styled\";\nimport { VscTrash } from \"react-icons/vsc\";\nimport { IoCloseOutline } from \"react-icons/io5\";\nimport { Link } from \"react-router-dom\";\nimport { useQuery } from \"react-query\";\nimport { ProductListApi } from \"../../apis/dataApi\";\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\nconst NotInfo = lazy(() => import(\"../utils/NotInfo\"));\n\nconst Container = styled.div``;\n\nconst Wrapper = styled.div`\n  position: relative;\n  background-color: #fff;\n  z-index: 10;\n  height: 48px;\n  margin: 0 auto;\n  padding: 0 16px 0 20px;\n  border-bottom: 1px solid #eff0f2;\n  background-color: #fff;\n  max-width: 640px;\n  min-width: 320px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst DescRecent = styled.p`\n  font-size: 13px;\n  line-height: 48px;\n  color: #909092;\n  letter-spacing: -0.02em;\n`;\n\nconst AllDelete = styled.button`\n  line-height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #747475;\n`;\n\nconst DeleteIconBox = styled.div`\n  margin-left: 4px;\n  cursor: pointer;\n\n  svg {\n    color: #c9c9ca;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n  }\n`;\n\nconst ListCart = styled.ul`\n  overflow: hidden;\n  /* padding-top: 48px; */\n`;\n\nconst List = styled.li`\n  position: relative;\n  margin: 20px 20px 0;\n  padding: 0 28px 20px 0;\n  border-bottom: 1px solid #f7f7f7;\n`;\n\nconst ListContents = styled.div`\n  overflow: hidden;\n  /* position: relative; */\n  /* padding-left: 29px; */\n`;\n\nconst ListImageBox = styled(Link)`\n  float: left;\n  position: relative;\n  width: 100px;\n  height: 100px;\n  border-radius: 6px;\n\n  ::before {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    border-radius: 6px;\n    background-color: rgba(0, 0, 0, 0.02);\n    content: \"\";\n  }\n`;\n\nconst ListImage = styled.div`\n  display: block;\n  overflow: hidden;\n  border-radius: 6px;\n\n  img {\n    display: block;\n    width: 100%;\n  }\n`;\n\nconst ListInfoBox = styled(Link)`\n  display: block;\n  overflow: hidden;\n  position: relative;\n  height: 100%;\n  padding: 4px 0 0 16px;\n  /* padding: 0 28px 0 12px; */\n  box-sizing: border-box;\n`;\n\nconst ListTitle = styled.strong`\n  display: block;\n  display: -webkit-box;\n  overflow: hidden;\n  font-weight: 400;\n  font-size: 16px;\n  line-height: 20px;\n  color: #747475;\n  max-height: 40px;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  word-break: break-all;\n`;\n\nconst ListPriceBox = styled.div`\n  display: inline-block;\n  padding-top: 4px;\n  font-weight: 700;\n  font-size: 15px;\n  line-height: 24px;\n  vertical-align: top;\n`;\n\nconst ListPrice = styled.strong`\n  display: inline-block;\n  height: 24px;\n  font-size: 15px;\n  line-height: 24px;\n  vertical-align: top;\n  font-weight: bold;\n\n  span {\n    font-size: 16px;\n  }\n`;\n\nconst ListDelete = styled.button`\n  position: absolute;\n  z-index: 10;\n  top: -3px;\n  right: -7px;\n  width: 30px;\n  height: 30px;\n\n  svg {\n    font-size: 24px;\n    color: #bdbdbd;\n  }\n`;\n\nconst MyPageSeen = () => {\n  const [seenArray, setSeenArray] = useState([]);\n  const { viewedItems } = useLocalStorage(); // 로컬 저장 커스텀 훅\n\n  const { data: dataList, isLoading } = useQuery(\n    \"ProductList\",\n    ProductListApi,\n    {\n      refetchOnWindowFocus: false,\n      onError: (e) => console.log(e.message),\n    }\n  );\n\n  useEffect(() => {\n    // 본 순서대로 나열되게 새로 map을 이용하여 저장함\n    let arr = viewedItems?.map((item) => dataList?.data[item - 1]);\n    setSeenArray(arr);\n  }, [dataList?.data, viewedItems]);\n\n  const deleteViewedItem = (item) => {\n    const stateFilter = seenArray?.filter((arr) => arr.id !== item);\n    setSeenArray(stateFilter);\n\n    const localFilter = viewedItems?.filter((arr) => arr !== item);\n    localStorage.setItem(\"viewedItems\", JSON.stringify(localFilter));\n  };\n\n  const allDeleteViewedItem = () => {\n    setSeenArray([]);\n    localStorage.setItem(\"viewedItems\", JSON.stringify([]));\n  };\n\n  return (\n    <Container>\n      {seenArray && seenArray?.length !== 0 ? (\n        <>\n          <Wrapper>\n            <DescRecent>최대 20개까지 저장됩니다.</DescRecent>\n            <AllDelete onClick={allDeleteViewedItem}>\n              전체삭제\n              <DeleteIconBox>\n                <VscTrash />\n              </DeleteIconBox>\n            </AllDelete>\n          </Wrapper>\n\n          <ListCart>\n            {!isLoading\n              ? seenArray?.map((list, index) => {\n                  return (\n                    <List key={index}>\n                      <ListContents>\n                        <ListImageBox to={`/detail/${list?.product}`}>\n                          <ListImage>\n                            <img\n                              src={list?.image}\n                              alt={list?.title}\n                              loading=\"lazy\"\n                            />\n                          </ListImage>\n                        </ListImageBox>\n                        <ListInfoBox to={`/detail/${list?.product}`}>\n                          <ListTitle>{list?.title}</ListTitle>\n                          <ListPriceBox>\n                            <ListPrice>\n                              <span>{list?.price}</span>원\n                            </ListPrice>\n                          </ListPriceBox>\n                        </ListInfoBox>\n                        <ListDelete onClick={() => deleteViewedItem(list?.id)}>\n                          <IoCloseOutline />\n                        </ListDelete>\n                      </ListContents>\n                    </List>\n                  );\n                })\n              : null}\n          </ListCart>\n        </>\n      ) : (\n        <NotInfo\n          url={\n            \"https://st.kakaocdn.net/commerce_ui/front-friendsshop/real/20221109/101144/assets/images/m960/ico_empty_ryan.png\"\n          }\n          text={\"최근 본 상품이 없어요.\"}\n        />\n      )}\n    </Container>\n  );\n};\n\nexport default MyPageSeen;\n","import React, { useEffect, useState } from \"react\";\nimport { useLocation, useParams } from \"react-router-dom\";\n\nexport const useLocalStorage = () => {\n  let { id } = useParams();\n  const { pathname } = useLocation();\n  const [viewedItems, setViewedItems] = useState([]);\n\n  useEffect(() => {\n    // localStorage의 데이터를 꺼냄\n    let view = localStorage.getItem(\"viewedItems\");\n\n    // 최초 접속시 localStorage에 데이터가 없을 경우 새로운 배열을 생성\n    if (view == null) {\n      view = [];\n    } else {\n      // view 자료를 꺼내 배열로 파싱 후 다시 view에 저장\n      view = JSON.parse(view);\n    }\n\n    if (id) {\n      // 현재 상품 id를 view 저장\n      if (view.length <= 20) {\n        view.unshift(+id);\n      } else {\n        view.pop();\n        // view.unshift(+id);\n      }\n\n      // 중복된 데이터를 넣지 않는 set 자료형에 view를 담아 중복을 제거\n      view = new Set(view);\n\n      // 중복 제거된 set 자료형의 view를 일반 배열로 변경\n      view = [...view];\n    }\n\n    // localStorage에 데이터를 JSON 자료형으로 저장\n    localStorage.setItem(\"viewedItems\", JSON.stringify(view));\n    setViewedItems(view);\n  }, [id, pathname]);\n\n  return { viewedItems, setViewedItems };\n};\n"],"names":["NotInfo","lazy","Container","styled","Wrapper","DescRecent","AllDelete","DeleteIconBox","ListCart","List","ListContents","ListImageBox","Link","ListImage","ListInfoBox","ListTitle","ListPriceBox","ListPrice","ListDelete","useState","seenArray","setSeenArray","viewedItems","useLocalStorage","useQuery","ProductListApi","refetchOnWindowFocus","onError","e","console","log","message","dataList","data","isLoading","useEffect","arr","map","item","length","onClick","localStorage","setItem","JSON","stringify","list","index","to","product","src","image","alt","title","loading","price","stateFilter","filter","id","localFilter","deleteViewedItem","url","text","useParams","pathname","useLocation","setViewedItems","view","getItem","parse","unshift","pop","Set"],"sourceRoot":""}