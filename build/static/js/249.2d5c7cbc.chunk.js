"use strict";(self.webpackChunkkakaofriends=self.webpackChunkkakaofriends||[]).push([[249],{249:function(n,t,e){e.r(t);var i,r,o,a,c,u,s,d,l,p,f,h=e(168),v=(e(2791),e(4193)),g=e(1087),x=e(8726),b=e(9126),k=(e(1933),e(2e3)),w=e(184);t.default=function(n){var t,e=n.api,i=(0,x.c)(),r=i.toggleIcon,o=i.currentBasket,a=(0,k.Z)(e,16),c=a.ref,u=a.dataList;return(0,w.jsxs)(y,{children:[u&&(null===u||void 0===u||null===(t=u.pages)||void 0===t?void 0:t.flat().map((function(n,t){return(0,w.jsxs)(Z,{children:[(0,w.jsx)(m,{children:t+1<4?(0,w.jsx)(V,{children:t+1}):(0,w.jsx)(j,{children:t+1})}),(0,w.jsxs)(I,{children:[(0,w.jsx)(g.rU,{to:"/detail/".concat(n.product),children:(0,w.jsx)(O,{children:(0,w.jsx)("img",{src:n.image,alt:n.title,loading:"lazy"})})}),(0,w.jsxs)(P,{children:[(0,w.jsx)(z,{children:(0,w.jsx)("strong",{children:n.title})}),(0,w.jsxs)(C,{children:[(0,w.jsx)("span",{children:n.price}),"\uc6d0"]}),(0,w.jsx)(S,{onClick:function(){return r(n)},children:(null===o||void 0===o?void 0:o.filter((function(t){return t.product===n.product})).length)>0?(0,w.jsx)(b.KHD,{}):(0,w.jsx)(b.a53,{})})]})]})]},t)}))),(0,w.jsx)("div",{ref:c,style:{position:"absolute",bottom:"450px"}})]})};var y=v.Z.ol(i||(i=(0,h.Z)(["\n  margin: 2px 14px 0 13px;\n  font-size: 0;\n\n  @media screen and (min-width: 640px) {\n    margin: 10px 12px 0;\n  }\n"]))),Z=v.Z.li(r||(r=(0,h.Z)(["\n  display: inline-block;\n  position: relative;\n  width: 50%;\n  padding: 20px 7px 20px 6px;\n  vertical-align: top;\n  box-sizing: border-box;\n\n  @media screen and (min-width: 640px) {\n    padding-left: 8px;\n    padding-right: 8px;\n  }\n"]))),m=v.Z.div(o||(o=(0,h.Z)(["\n  position: absolute;\n  left: 13px;\n  top: 27px;\n  z-index: 1;\n  width: 24px;\n  font-size: 16px;\n  height: 24px;\n  text-align: center;\n  font-weight: bold;\n\n  @media screen and (min-width: 640px) {\n    left: 19px;\n    top: 31px;\n  }\n"]))),j=v.Z.span(a||(a=(0,h.Z)(["\n  display: block;\n  border-radius: 4px;\n  font-size: 14px;\n  line-height: 24px;\n  font-weight: 700;\n  color: #fff;\n  background-color: #aeaeaf;\n"]))),V=(0,v.Z)(j)(c||(c=(0,h.Z)(["\n  background-color: #3c404b;\n"]))),I=v.Z.div(u||(u=(0,h.Z)(["\n  min-height: 260px;\n"]))),O=v.Z.div(s||(s=(0,h.Z)(['\n  overflow: hidden;\n  position: relative;\n  border-radius: 6px;\n  padding-top: 100%;\n  cursor: pointer;\n\n  ::after {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    content: "";\n    background-color: rgba(0, 0, 0, 0.04);\n  }\n\n  img {\n    display: block;\n    width: 100%;\n    position: absolute;\n    top: 0;\n    left: 0;\n  }\n']))),P=v.Z.div(d||(d=(0,h.Z)(["\n  position: relative;\n"]))),z=v.Z.div(l||(l=(0,h.Z)(["\n  padding-top: 10px;\n  strong {\n    padding-right: 32px;\n    display: block;\n    display: -webkit-box;\n    overflow: hidden;\n    font-weight: 400;\n    font-size: 16px;\n    line-height: 20px;\n    color: #747475;\n    max-height: 40px;\n    text-overflow: ellipsis;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    word-break: break-all;\n  }\n"]))),C=v.Z.em(p||(p=(0,h.Z)(["\n  display: inline-block;\n  padding-top: 4px;\n  font-weight: 700;\n  font-size: 15px;\n  line-height: 24px;\n  vertical-align: top;\n\n  span {\n    font-size: 16px;\n  }\n"]))),S=v.Z.button(f||(f=(0,h.Z)(["\n  position: absolute;\n  top: 5px;\n  right: -4px;\n  bottom: auto;\n  padding: 6px;\n\n  svg {\n    width: 20px;\n    height: 20px;\n    color: #909092;\n  }\n"])))},8726:function(n,t,e){e.d(t,{c:function(){return p}});var i=e(4165),r=e(3433),o=e(5861),a=e(9439),c=e(9062),u=e(2791),s=e(9434),d=e(516),l=e(1431),p=function(){var n=(0,s.I0)(),t=(0,u.useState)({}),e=(0,a.Z)(t,2),p=e[0],f=e[1],h=(0,u.useState)(""),v=(0,a.Z)(h,2),g=v[0],x=v[1],b=(0,u.useState)(!1),k=(0,a.Z)(b,2),w=(k[0],k[1]),y=(0,s.v9)((function(n){return n.user.basket})),Z=(0,s.v9)((function(n){return n.user.currentUser}));(0,u.useEffect)((function(){Z.uid&&x((0,c.JU)(d.wO,"userInfo",Z.uid.toString()))}),[Z.uid]),(0,u.useEffect)((function(){g&&(0,c.cf)(g,(function(n){f(n.data()),w(!0)}))}),[g]);var m=function(){var t=(0,o.Z)((0,i.Z)().mark((function t(e,o){var a,u,s,d;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===(null===y||void 0===y?void 0:y.find((function(n){return n.product===e.product})))?n((0,l.QB)([{id:e.id,product:e.product,title:e.title,price:e.price,image:e.image,quanity:o||1,check:!0}].concat((0,r.Z)(y)))):(a=null===y||void 0===y?void 0:y.filter((function(n){return n.product!==e.product})),n((0,l.QB)(a))),!Z.uid){t.next=12;break}if(void 0!==(null===p||void 0===p||null===(u=p.basket)||void 0===u?void 0:u.find((function(n){return n.product===e.product})))){t.next=9;break}return t.next=7,(0,c.r7)(g,{basket:[].concat((0,r.Z)(null===p||void 0===p?void 0:p.basket),[{id:e.id,product:e.product,title:e.title,price:e.price,image:e.image,quanity:o||1,check:!0}])});case 7:t.next=12;break;case 9:return d=null===p||void 0===p||null===(s=p.basket)||void 0===s?void 0:s.filter((function(n){return n.product!==e.product})),t.next=12,(0,c.r7)(g,{basket:d});case 12:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}();return{toggleIcon:m,currentBasket:y,docRef:g,myInfo:p}}},2e3:function(n,t,e){var i=e(4165),r=e(5861),o=e(2791),a=e(1044),c=e(9348),u=e(1933);t.Z=function(n,t){var e=(0,u.useQueryClient)();(0,o.useEffect)((function(){return function(){e.setQueryData(["infiniteProduct",n],(function(n){var t;return{pages:null===n||void 0===n?void 0:n.pages.slice(0,1),pageParams:null===n||void 0===n||null===(t=n.pageParams)||void 0===t?void 0:t.slice(0,1)}}))}}),[n]);var s=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(r){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ZP.get("".concat(n,"limit=").concat(t,"&page=").concat(r));case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=(0,u.useInfiniteQuery)(["infiniteProduct",n],(function(n){var t=n.pageParam;return s(void 0===t?1:t)}),{refetchOnWindowFocus:!1,getNextPageParam:function(n,t){var e=t.length+1;return e||void 0}}),l=d.data,p=d.hasNextPage,f=d.fetchNextPage,h=(0,c.YD)(),v=h.ref,g=h.inView;return(0,o.useEffect)((function(){g&&p&&f()}),[f,p,g,n]),{ref:v,dataList:l}}},9348:function(n,t,e){e.d(t,{YD:function(){return k}});var i=e(9439),r=e(5671),o=e(3144),a=e(136),c=e(7277),u=e(2791);function s(){return s=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},s.apply(this,arguments)}var d=new Map,l=new WeakMap,p=0,f=void 0;function h(n){return Object.keys(n).sort().filter((function(t){return void 0!==n[t]})).map((function(t){return"".concat(t,"_").concat("root"===t?(e=n.root)?(l.has(e)||(p+=1,l.set(e,p.toString())),l.get(e)):"0":n[t]);var e})).toString()}function v(n){var t=h(n),e=d.get(t);if(!e){var i,r=new Map,o=new IntersectionObserver((function(t){t.forEach((function(t){var e,o=t.isIntersecting&&i.some((function(n){return t.intersectionRatio>=n}));n.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=o),null==(e=r.get(t.target))||e.forEach((function(n){n(o,t)}))}))}),n);i=o.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),e={id:t,observer:o,elements:r},d.set(t,e)}return e}function g(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f;if("undefined"===typeof window.IntersectionObserver&&void 0!==i){var r=n.getBoundingClientRect();return t(i,{isIntersecting:i,target:n,intersectionRatio:"number"===typeof e.threshold?e.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var o=v(e),a=o.id,c=o.observer,u=o.elements,s=u.get(n)||[];return u.has(n)||u.set(n,s),s.push(t),c.observe(n),function(){s.splice(s.indexOf(t),1),0===s.length&&(u.delete(n),c.unobserve(n)),0===u.size&&(c.disconnect(),d.delete(a))}}var x=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function b(n){return"function"!==typeof n.children}u.Component;function k(){var n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.threshold,r=t.delay,o=t.trackVisibility,a=t.rootMargin,c=t.root,s=t.triggerOnce,d=t.skip,l=t.initialInView,p=t.fallbackInView,f=t.onChange,h=u.useState(null),v=(0,i.Z)(h,2),x=v[0],b=v[1],k=u.useRef(),w=u.useState({inView:!!l,entry:void 0}),y=(0,i.Z)(w,2),Z=y[0],m=y[1];k.current=f,u.useEffect((function(){if(!d&&x){var n=g(x,(function(t,e){m({inView:t,entry:e}),k.current&&k.current(t,e),e.isIntersecting&&s&&n&&(n(),n=void 0)}),{root:c,rootMargin:a,threshold:e,trackVisibility:o,delay:r},p);return function(){n&&n()}}}),[Array.isArray(e)?e.toString():e,x,c,a,s,d,o,p,r]);var j=null==(n=Z.entry)?void 0:n.target;u.useEffect((function(){x||!j||s||d||m({inView:!!l,entry:void 0})}),[x,j,s,d,l]);var V=[b,Z.inView,Z.entry];return V.ref=V[0],V.inView=V[1],V.entry=V[2],V}}}]);
//# sourceMappingURL=249.2d5c7cbc.chunk.js.map